{"version":3,"sources":["webpack:///./src/App.vue?0238","webpack:///./src/App.vue","webpack:///./src/store/user/user.js","webpack:///./src/pages/login/router.js","webpack:///./src/pages/role/router.js","webpack:///./src/mock/router.js","webpack:///./src/pages/home/router.js","webpack:///./src/store/router/index.js","webpack:///./src/store/index.js","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["App","render","_h","this","$createElement","_c","_self","staticClass","attrs","id","name","_v","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","user","namespaced","state","isLogin","mutations","SET_USER","userData","lodash_default","a","assign","js_cookie_default","set","REMOVE_USER","remove","actions","setUser","_ref","commit","removeUser","_ref2","router","path","component","resolve","e","then","__WEBPACK_AMD_REQUIRE_ARRAY__","bind","catch","oe","role_router","meta","cn","commonRoutes","layoutObj","components","default","sidebar","redirect","children","store_router","addRoutes","SET_ROUTERS","adds","length","concat","getRoutes","roles","indexOf","vue_esm","use","vuex_esm","src_store","Store","modules","StoreUser","StoreAddRoutes","getters","userInfo","vue_router_esm","src_router_router","getJSON","dispatch","_roles","beforeEach","to","from","next","src_router","vee_validate_esm","localize","zh_CN_default","prototype","$http","axios_default","el","store","template"],"mappings":"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","file":"static/js/app.faa594c823babc1106ed.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clearfix\",attrs:{\"id\":\"app\"}},[_c('router-view',{attrs:{\"name\":\"sidebar\"}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a0b5c96\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3a0b5c96\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a0b5c96\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import _ from 'lodash'\r\nimport Cookie from 'js-cookie'\r\n\r\nconst state = {\r\n  isLogin: false\r\n}\r\n\r\nconst mutations = {\r\n  // 设置用户登录状态 存入 cookie\r\n  SET_USER: function (state, userData) {\r\n    state = _.assign(state, userData)\r\n    Cookie.set('accountData', state)\r\n  },\r\n  // 移除登录状态 删除 cookie\r\n  REMOVE_USER: function (state) {\r\n    state = _.assign(state, {\r\n      isLogin: false\r\n    })\r\n    Cookie.remove('accountData')\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  setUser: function ({ commit }, userData) {\r\n    commit('SET_USER', userData)\r\n  },\r\n  removeUser: function ({ commit }) {\r\n    commit('REMOVE_USER')\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/user/user.js","const LoginView = resolve => require(['@/pages/login/login.vue'], resolve);\r\n\r\nexport default {\r\n    path: '/login',\r\n    name: 'login',\r\n    component: LoginView\r\n};\r\n\r\n// export default router;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/router.js","const RoleView = resolve => require(['@/pages/role/role.vue'],resolve)\r\n\r\nexport default {\r\n path:'/role',\r\n name:'role',\r\n meta:{\r\n  'cn':'管理权限'\r\n },\r\n component:RoleView\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/role/router.js","// 登陆 组件路由\r\nimport LoginRouter from '@/pages/login/router.js'\r\n\r\n// 中间 概况介绍 组件路由\r\nimport HomeRouter from '@/pages/home/router.js'\r\n\r\n// 中间 管理员才能显示的 组件路由\r\nimport RoleRouter from '@/pages/role/router.js'\r\n\r\n// 中间 内容 组件\r\nconst Container = resolve => require(['@/components/layout/layout'],resolve)\r\n// 左侧 sidebar 组件\r\nconst SideBar = resolve => require(['@/components/layout/sidebar'],resolve)\r\n\r\n// 登录界面\r\nexport function commonRoutes() {\r\n    return LoginRouter;\r\n}\r\n\r\n// 登陆后\r\nlet layoutObj = {\r\n    path: '/',\r\n    name: 'layout',\r\n    components: { \r\n      default: Container,\r\n      sidebar: SideBar,\r\n    },\r\n    redirect: '/index',\r\n    children: [\r\n        HomeRouter\r\n    ]\r\n};\r\n\r\n// 普通用户\r\nexport function normalRoues() {\r\n    return [commonRoutes(),layoutObj]\r\n}\r\n\r\n// 管理员\r\nexport function adminRoutes() {\r\n    layoutObj.children = layoutObj.children.concat([RoleRouter])\r\n    return [commonRoutes(),layoutObj]\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mock/router.js","const HomeView = resolve => require(['@/pages/home/home.vue'],resolve);\r\n\r\nconst router = {\r\n path:'/index',\r\n name:'index',\r\n meta:{\r\n  cn:'公共显示'\r\n },\r\n component:HomeView\r\n}\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/router.js","import _ from 'lodash'\r\n\r\nimport {adminRoutes,normalRoues} from '@/mock/router'\r\n\r\nconst state = {\r\n    // 初始化 要加入的 权限路由\r\n    addRoutes: []\r\n};\r\n\r\nconst mutations = {\r\n    // 设置 路由表\r\n    SET_ROUTERS:function(state,adds){\r\n        state.addRoutes.length = 0;\r\n        state.addRoutes = _.concat(state.addRoutes,adds)\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    // commit 设置路由表 并 获取路由表\r\n    getRoutes:function({commit},roles){\r\n        if (_.indexOf(roles, 'admin') !== -1) {\r\n            commit('SET_ROUTERS',adminRoutes())\r\n        } else {\r\n            commit('SET_ROUTERS',normalRoues())\r\n        }\r\n    }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/router/index.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nimport StoreUser from '@/store/user/user.js'\r\nimport StoreAddRoutes from '@/store/router/index.js'\r\n\r\nVue.use(Vuex)\r\n\r\nvar store = new Vuex.Store({\r\n modules:{\r\n   StoreUser,\r\n   StoreAddRoutes\r\n },\r\n getters:{\r\n  userInfo: state => state.StoreUser,//账户信息\r\n  addRoutes: state => state.StoreAddRoutes.addRoutes //动态路由表信息\r\n }\r\n});\r\n\r\nexport default store\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport store from '@/store/index'\r\n\r\nimport Cookie from 'js-cookie'\r\n\r\nimport { commonRoutes } from '@/mock/router'\r\n\r\nVue.use(VueRouter)\r\n\r\nvar router = new VueRouter({\r\n\r\n})\r\n\r\n//根据是否有cookie来判断是否进行初始化\r\nif (Cookie.getJSON('accountData') && Cookie.getJSON('accountData').isLogin) {\r\n  // 根据 cookie 设置用户登陆状态\r\n  store.dispatch('StoreUser/setUser', Cookie.getJSON('accountData')).then(() => {\r\n    let _roles = store.getters.userInfo.roles\r\n    // 根据roles权限生成可访问的路由表\r\n    store.dispatch('StoreAddRoutes/getRoutes', _roles).then(() => {\r\n      // 动态添加可访问路由表\r\n      router.addRoutes(store.getters.addRoutes)\r\n    })\r\n  })\r\n} else {\r\n  router.addRoutes([commonRoutes()])\r\n}\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  // 从 cookie 判断是否登录\r\n  if (Cookie.getJSON('accountData') && Cookie.getJSON('accountData').isLogin) {\r\n    next();//当有用户权限的时候，说明当前用户可访问路由已生成\r\n  } else if (to.path === '/login') {\r\n    next()\r\n  } else {\r\n    next('/login')\r\n  }\r\n})\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\r\nimport App from './App'\r\n\r\n//引入表单验证插件\r\nimport VeeValidate, {Validator} from 'vee-validate'\r\n//设置中文\r\nimport zh from 'vee-validate/dist/locale/zh_CN'\r\nValidator.localize('zh_CN', zh)\r\n\r\nimport router from './router/index.js'\r\nimport store from './store/index.js'\r\n\r\n// 引入 axios \r\nimport axios from 'axios'\r\nVue.prototype.$http = axios\r\n\r\nVue.use(VeeValidate)\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}